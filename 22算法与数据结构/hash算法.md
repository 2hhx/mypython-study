# hash算法的应用

[2017-03-05](https://lupython.gitee.io/2017/03/05/哈希算法的应用/)

1. [哈希算法的应用](https://lupython.gitee.io/2017/03/05/哈希算法的应用/#哈希算法的应用)
2. [什么是哈希算法？](https://lupython.gitee.io/2017/03/05/哈希算法的应用/#什么是哈希算法？)

------

#### 哈希算法的应用

还记得 2011 年 CSDN 的“脱库”事件吗？当时，CSDN 网站被黑客攻击，超过 600 万用户的注册邮箱和密码明文保存用户密码行为产生了不满。如果你是 CSDN 的一名工程你会如何存储用户密码这么重要的数据吗？仅仅 MD5 加密一下存储就够了吗？ 要想搞清楚这个问题，就要先弄明白哈希算法。

哈希算法历史悠久，业界著名的哈希算法也有很多，比如 MD5、SHA 等。在我们平时的开发中，基本上都是拿现成的直接用。所以，我今天不会重点剖析哈希算法的原理，也不会教你如何设计一个哈希算法，而是从实战的角度告诉你，在实际的开发中，我们该如何何用哈希算法解决问题。

#### 什么是哈希算法？

我们前面几节讲到“散列表”“散列函数”，这里又讲到“哈希算法”，你是不是有点一头雾水？实际上，不管是“散列”还是“哈希”，这都是中文翻译的差别，英文其实就是“Hassh”。所以，我们常听到有人把“散列表”叫作“哈希表”“Hash 表”，把“哈希算法”叫作“Hash 算法”或者“散列算法”。那到底什么是哈希算法呢？

哈希算法的定义和原理非常简单，基本上一句话就可以概括了。将任意长度的二进制值串映射为固定长度的二进制值串，这个映射的规则就是哈希算法，而通过原始数据映射之后得到的二进制值串就是哈希值。但是，要想设计一个优秀的哈希算法并不容易，根据我的经验，我总结了需要满足的几点要求：

* 从哈希值不能反向推导出原始数据（所以哈希算法也叫单向哈希算法）
* 对输入数据非常敏感，哪怕原始数据只修改了一个 Bit，最后得到的哈希值也大不相同；
* 散列冲突的概率要很小，对于不同的原始数据，哈希值相同的概率非常小
* 哈希算法的执行效率要尽量高效，针对较长的文本，也能快速地计算

这些定义和要求都比较理论，可能还是不好理解，我拿 MD5 这种哈希算法来具体说明一下。我们分别对“今天我来讲哈希算法”和“jiajia”这两个文本，计算 MD5 哈希值，得到两串看起来毫无规律的字符串（MD5 的哈希值是 128 位的 Bit 长度，为了方便表示，我把它们转化成了 16 进制编码）可以看出来，无论要哈希的文本有多长、多短，通过 MD5 哈希之后，得到的哈希值的长度都是相同的，而且得到的哈希值看起来像一堆随机数，完全没有规律。

```
MD5(" 今天我来讲哈希算法 ") = bb4767201ad42c74e650c1b6c03d78faMD5("jiajia") = cd611a31ea969b908932d44d126d195b
```

我们再来看两个非常相似的文本，“我今天讲哈希算法！”和“我今天讲哈希算法”。这两个文本只有一个感叹号的区别。如果用 MD5 哈希算法分别计算它们的哈希值，你会发现，尽管只有一字之差，得到的哈希值也是完全不同的。

```
MD5(" 我今天讲哈希算法！") = 425f0d5a917188d2c3c3dc85b5e4f2cbMD5(" 我今天讲哈希算法 ") = a1fb91ac128e6aa37fe42c663971ac3d
```

我在前面也说了，通过哈希算法得到的哈希值，很难反向推导出原始数据。比如上面的例子中，我们就很难通过哈希值“a1fb91ac128e6aa37fe42c663971ac3d”反推出对应的文本“我今天讲哈希算法”。

哈希算法要处理的文本可能是各种各样的。比如，对于非常长的文本，如果哈希算法的计算时间很长，那就只能停留在理论研究的层面，很难应用到实际的软件开发中。比如，我们把今天这篇包含 4000 多个汉字的文章，用 MD5 计算哈希值，用不了 1ms 的时间。

哈希算法的应用非常非常多，我选了最常见的六个，分别是安全加密、唯一标识、数据校验、负载均衡、数据分片、分布式存储

![hash安全加密1.png](https://i.loli.net/2019/03/09/5c838a5719815.png)
![hash安全加密算法2.png](https://i.loli.net/2019/03/09/5c838a59d947a.png)
![hash安全算法3.png](https://i.loli.net/2019/03/09/5c838a5c63126.png)

![hash图片的唯一标示.png](https://i.loli.net/2019/03/09/5c838bb4b3c54.png)

![hash数据校验.png](https://i.loli.net/2019/03/09/5c838bb9b87bc.png)

![hash负载均衡.png](https://i.loli.net/2019/03/09/5c838ce97b8c5.png)

**分布式存储**

![hash分布式存储.png](https://i.loli.net/2019/03/09/5c838ce9793e2.png)

![hash分布式存储2.jpg](https://i.loli.net/2019/03/09/5c838ce725ef2.jpg)










  