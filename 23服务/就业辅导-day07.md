



## 1 问题解答

```python
# git上拉下来了，在本地跑起来
	-zip/克隆，pull 
  -虚拟环境（区分项目），命令行，
  -项目跑起来：装依赖（极个别情况：只能在linux或者mac上用），上网搜这些模块支不支持windows，  wheel
  -数据库：两套：测试库（地址 ，用户名，密码），生产库（正式库）
  -直接连接测试库跑
  -做开发，开发新功能（一般情况不要在测试库上直接做），增加，删除字段，测试库的某个表字段删了
  -最好在本地搞个库（没有数据），直接从测试库拿下来， Navicat就可以做，命令
  -redis、mongodb。。。。
  -强调一个点：一定不要在正式库测数据（测试账号，在正式库上测）
```



## 2 接口幂等性

```python
# 幂等性：特点是其任意多次执行所产生的影响均与一次执行的影响相同
# 接口的幂等性：在调用一次或多次接口，产生的效果一样，get，put，delete  本身就是幂等性
# post接口，本身不是幂等性的 ，一次下多个订单情况
#解决：
	-当点击一次时，把按钮置置为不可用
  -token机制（随机字符串）
  -乐观锁机制
  -唯一主键，在post前先生成id号（主键），携带着过来，插入数据
  -防重表（新建一个去重表），新增数据， 就会在去重表里插入数据，
	-唯一ID：放到可去重的集合中，如果id在集合中了，已经新增过，如果不在，表示第一次新增
  
  点击新增页面，给一个随机字符串 ---点一次和点多次都会带着这个随机字符串，
  再点一次新增，给的字符串跟上面一样吗？
  
  
  
  createuser--->post-->注册
  {
    name:lqz
   pwd:123
  }
 
  发了两次请求，是不是新增两个用户（如果下订单，是不是下了两个订单）
  
  #当用户一进入这个页面---》向后端发请求---》带一个随机字符串回来
    createuser--->post-->注册
  {
    token：随机字符串
    name:lqz
   pwd:123
  }
 
  发了两次请求，是不是新增两个用户（如果下订单，是不是下了两个订单）
  

  随机字符串：   reids中，做主键，去重表
```



## 3 如何写好接口文档

```python
# 1 你的接口写完了，你需要把接口文档写出来，给被人用（web前端，app端），前端，app端，小程序，拿着你的接口文档来写程序
	- HTTP携带信息的方式  token   放到body体中(key:value)，还是放到头中(key:value)，还是放到请求体  127.0.0.0/loing?name=lqz
  -分离通用信息:header中信息是通用的，app后端发请求
  -路径中的参数表达式  127.0.0.0/loing?name=lqz     127.0.0.0/loing/lqz
	-数据模型定义   每个接口都有个数据模型   
  		-createuser接口    {name:str age: int ,address:str}
    	-login接口     {name:str  pwd:str,code:int}

	-接口文档：带例子  127.0.0.1/createuser   请求参数{}   返回数据{}

	-错误码：最最开始写上     
  		1001：表示用户创建失败    
    	1002：用户名或密码错误
      1005：没有权限
      1006：超过频率
      1999：未知错误



      
      
#  完整的一个创建用户的接口文档
**1 请求示例**
​```
// general 
POST http://www.testapi.com/api/user/vip/?token=abcdefg

// request payload
{
    "name": "qianxun",
    "age": 14,
    "like": ["music", "reading"]
}

// response
{
    "id": "asdkfjalsdkf"
}
​```

**2 路径与查询字符串参数模型**
`POST http://www.testapi.com/api/user/{{userType}}/?token={{token}}`

| 名称     | 是否必须 | 说明                                             |
| -------- | -------- | ------------------------------------------------ |
| userType | 是       | 用户类型。`commom`表示普通用户，`vip`表示vip用户 |
| token    | 是       | 认证令牌                                         |

**3 请求体参数模型**

| 名称 | 是否必须 | 说明               |
| ---- | -------- | ------------------ |
| name | 是       | 用户名。4-50个字符 |
| age  | 否       | 年龄               |
| like | 否       | 爱好。最多20个     |

**4 响应体参数模型**

| 名称 | 说明   |
| ---- | ------ |
| id   | 用户id |

**5 异常处理**

| 状态码 | 说明               | 解决方案                   |
| ------ | ------------------ | -------------------------- |
| 401    | token过期          | 请重新申请token            |
| 424    | 超过最大在创建人数 | 请在控制台修改最大创建人数 |



#  跟你前端如何沟通？
	-前端连到测试库写（测试库服务一直开着）
	-接口文档给他
		-丢给前端一个地址（公司内部）：https://www.showdoc.cc/lqz?page_id=4053873913755352
    	-coreapi，swagger  自动生成接口文档
    -丢给他一个pdf文档（尽量不要给word，word可以改）
  -用接口，有些字段什么意思，不太清楚
  -用接口，出了bug（返回了xxx信息），排查接口问题，修改，更新接口文档，告诉他，新版本，再去用就可以了
  
  -出的bug，你找不到，你发现没有问题，你跟前端 联调 ，让他连你的机器（怎么连：前端把请求的地址改成你的地址）
  	-你把你的项目跑起来，把ip地址给他，让他连你的机器（你的数据库连哪？最好连测试库，bug才好重现）
    -这样他在前端一操作，来到你的项目里了（加日志，加输出，dbug调试）

```



### 简历上体现出：项目：showdoc写接口文档，coreapi自动生成接口文档
